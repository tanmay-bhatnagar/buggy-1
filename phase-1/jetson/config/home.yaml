# Home indoor profile: Conservative, slow movement in tight spaces
# Designed for environments with close obstacles (furniture, walls, etc.)

pairing_seconds: 30       # 30 second countdown before buggy starts moving
max_seconds: 30           # Run for 30 seconds after countdown

serial:
  port: /dev/ttyACM0
  baud: 115200
  timeout_ms: 200

# Conservative thresholds - stop early, turn early, go slow early
thresholds_cm:
  slow_enter: 80          # Drop to SLOW when center < 80 cm (very early)
  slow_exit: 100          # Back to FAST when > 100 cm (rarely happens indoors)
  turn_enter: 50          # Start turning when < 50 cm
  turn_exit: 65           # Resume forward when > 65 cm
  stop_enter: 25          # STOP + BACKOFF when < 25 cm (closer approach)
  stop_exit: 45           # Resume when > 45 cm
  min_valid: 2            # Accept readings down to 2cm (very close obstacles)
  max_valid: 300

# Slower scanning cadence for careful navigation
cadence_ms:
  rescan_ms: 300          # Scan every 300ms (slower, more deliberate)
  min_turn_ms: 900        # Commit to turns longer (very deliberate, avoid thrashing)
  backoff_ms: 200         # Very short reverse (minimal backing up)
  stall_timer_ms: 3000    # Allow more time to find path
  meas_cooldown_ms: 50    # Slightly more spacing between pings
  servo_settle_ms: 150    # Full settle time

# More thorough sweeping in tight spaces
sweep:
  left_deg: 135
  right_deg: 45
  step_deg: 15
  center_trim_deg: 0
  samples_per_point: 3    # Take 3 samples per angle (more reliable)

# Very slow, ultra-cautious speed for tight spaces
pwm:
  fast: 160               # "Fast" is actually quite slow
  slow: 120               # Slow is crawling speed
  ramp_ms: 300

watchdog:
  hb_period_ms: 200
  hb_timeout_ms: 600

logging:
  csv_path: logs/home_run.csv
  console_hud: true
  include_latency_ms: true

